<div class="registered-users-container">
  <h1>Registered Users</h1>

  <!-- Search & Sort Controls -->
  <div class="controls-container">
    <input
      type="text"
      placeholder="Search by username"
      [(ngModel)]="searchQuery"
      (input)="applySearch()"
      class="search-input"
    />

    <div class="sort-controls">
      <label>Sort By:</label>
      <select [(ngModel)]="sortField" (change)="sortUsers()">
        <option value="name">Name</option>
        <option value="username">Username</option>
        <option value="email">Email</option>
      </select>

      <button (click)="toggleSortOrder()">
        {{ sortOrder === 'asc' ? '⬆️ Ascending' : '⬇️ Descending' }}
      </button>
    </div>
  </div>

  <!-- Error -->
  <div *ngIf="error" class="error-message">
    {{ error }}
  </div>

  <!-- User Cards -->
  <div class="users-grid" *ngIf="!error && pagedUsers.length > 0">
    <app-details-card
      *ngFor="let user of pagedUsers"
      [title]="user.name || user.username"
      [details]="[
        'Email: ' + (user.email || 'N/A'),
        'Username: ' + user.username
      ]"
      [showDeleteButton]="true"
      (delete)="openDeleteDialog(user)">
    </app-details-card>
  </div>

  <!-- No Users Message -->
  <div *ngIf="!error && pagedUsers.length === 0" class="no-users-message">
    No users found.
  </div>

  <!-- Pagination -->
  <div *ngIf="!error && filteredUsers.length > pageSize" class="pagination-container">
    <button [disabled]="currentPage === 0" (click)="prevPage()">Previous</button>
    <span>Page {{ currentPage + 1 }} of {{ totalPages }}</span>
    <button [disabled]="currentPage >= totalPages - 1" (click)="nextPage()">Next</button>
  </div>
</div>
